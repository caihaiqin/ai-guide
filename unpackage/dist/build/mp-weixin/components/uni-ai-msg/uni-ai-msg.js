"use strict";const e=require("../../common/vendor.js"),t=require("../../config.js"),s=require("../../lib/markdown-it.min.js"),n=require("../../lib/highlight/highlight-uni.min.js");require("../../lib/html-parser.js");const{adpid:o}=t.config;let i=[];const r=s.mt({html:!0,highlight:function(e,t){let s="";try{s=n.$e.highlightAuto(e).value}catch(l){s=r.utils.escapeHtml(e)}let o=s.split(/\n/).slice(0,-1).map(((e,t)=>""==e?"":'<li><span class="line-num" data-line="'+(t+1)+'"></span>'+e+"</li>")).join("");o='<ol style="padding: 0px 30px;">'+o+"</ol>",i.push(e);let a='<div style="background:#0d1117;margin-top: 5px;color: #888;padding:5px 0;border-radius: 5px;">';return a+=`<pre class="hljs" style="padding:0 8px;margin-bottom:5px;overflow: auto;display: block;border-radius: 5px;"><code>${o}</code></pre>`,a+="</div>",a}}),a={name:"uni-ai-msg",data:()=>({left:"-100px",top:"-100px",adpid:o,showMoreMenu:!1}),mounted(){},created(){},props:{showCursor:{type:[Boolean,Number],default:()=>!1},isLastMsg:{type:Boolean,default:()=>!1},msg:{type:Object,default:()=>({content:"",isDelete:!1})}},computed:{msgContent(){return this.msg.content},nodes(){if(!this.msgContent)return;let e="";if(this.msgContent.split("```").length%2){let t=this.msgContent;"\n"!=t[t.length-1]&&(t+="\n"),t+=' <span class="cursor">|</span>',e=r.render(t)}else e=r.render(this.msgContent)+' \n <span class="cursor">|</span>';return e}},methods:{trOnclick(t){console.log(t);let{attrs:s}=t.detail.node;console.log({attrs:s});let{"code-data-index":n,class:o}=s;"copy-btn"==o&&e.index.setClipboardData({data:i[n],showToast:!1,success(){e.index.showToast({title:"复制成功",icon:"none"})}})},changeAnswer(){this.$emit("changeAnswer")},copy(){e.index.setClipboardData({data:this.msgContent,showToast:!1,success(){e.index.showToast({title:"复制成功",icon:"none"})}}),this.showMoreMenu=!0},removeMsg(){this.$emit("removeMsg"),this.showMoreMenu=!1}}};if(!Array){(e.resolveComponent("uni-dateformat")+e.resolveComponent("ua-markdown"))()}Math||((()=>"../../uni_modules/uni-dateformat/components/uni-dateformat/uni-dateformat.js")+(()=>"../ua-markdown/ua-markdown.js"))();const l=e._export_sfc(a,[["render",function(t,s,n,o,i,r){return e.e({a:!n.msg.isDelete},n.msg.isDelete?{}:e.e({b:e.p({date:n.msg.create_time,format:"MM/dd hh:mm:ss"}),c:n.msg.isAi},n.msg.isAi?e.e({d:r.nodes&&r.nodes.length},r.nodes&&r.nodes.length?{e:r.nodes,f:e.o(((...e)=>r.trOnclick&&r.trOnclick(...e)))}:{},{g:n.showCursor?1:""}):{h:e.p({source:r.msgContent})},{i:i.showMoreMenu},(i.showMoreMenu,{}),{j:n.msg.isAi?1:"",k:n.msg.isAi?"":1}))}]]);wx.createComponent(l);
