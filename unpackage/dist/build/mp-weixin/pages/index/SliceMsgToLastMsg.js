"use strict";var s=Object.defineProperty,t=(t,i,e)=>(((t,i,e)=>{i in t?s(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e})(t,"symbol"!=typeof i?i+"":i,e),e);exports.SliceMsgToLastMsg=class{constructor(s){t(this,"msgs",""),t(this,"sliceMsgIng",!1),this.$=s,this.t=70,this.msgCreateTime=!1,this.stopAction=!1}addMsg(s){this.msgs+=s,!1===this.sliceMsgIng&&this.sliceMsg()}end(){this.stopAction=!0}sliceMsg(){if(!0===this.stopAction)return;this.sliceMsgIng=!0;const s=this.msgs.match(/[\p{Script=Han}]|[^\p{Script=Han}]+/gu);let t=s.reverse().pop();this.$.updateLastMsg((s=>{this.msgCreateTime&&this.msgCreateTime!=s.create_time||(this.msgCreateTime=s.create_time,s.content+=t)})),this.$.showLastMsg(),this.msgs=s.reverse().join(""),this.msgs.length?this.t?setTimeout((()=>{this.sliceMsg(this.msgs)}),this.t):this.sliceMsg(this.msgs):this.sliceMsgIng=!1}};
